name: Triple_Radar_Full_Power

on:
  schedule:
    - cron: '*/5 * * * *'  # æ¯ 5 åˆ†é˜è‡ªå‹•å•Ÿå‹•ä¸€æ¬¡ï¼Œå…¨å¤©å€™ç›£æ§
  workflow_dispatch:      # å…è¨±æ‰‹å‹•é»æ“Š Run workflow æ¸¬è©¦

jobs:
  radar-mission:
    runs-on: ubuntu-latest
    steps:
      - name: 1. æª¢å‡ºå€‰åº«ä»£ç¢¼
        uses: actions/checkout@v3

      - name: 2. åˆå§‹åŒ– Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: 3. å®‰è£æ­¦å™¨åº«å¿…è¦ä¾è³´
        run: |
          pip install websocket-client requests

      - name: 4. å•Ÿå‹•ä¸‰é‡é˜²ç¦¦é›·é”ç³»çµ±
        env:
          # å°æ¥ GitHub Secrets è£¡çš„ä¿éšªç®±è®Šæ•¸
          TG_TOKEN: ${{ secrets.TG_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
          TRADE_SYMBOL: ${{ secrets.TRADE_SYMBOL }}
        run: |
          # å•Ÿå‹• V1 & V2ï¼šé‡åƒ¹è¡çªèˆ‡å‹•èƒ½èƒŒé›¢é›·é” (èƒŒæ™¯åŸ·è¡Œ)
          echo "ğŸ“¡ æ­£åœ¨å•Ÿå‹• V1+V2 å¯¦æ™‚ç›£æ§æ¨¡çµ„..."
          python radar_commander.py & 
          
          # ç·©è¡ 5 ç§’ç¢ºä¿ WebSocket é€£ç·šç©©å®š
          sleep 5
          
          # å•Ÿå‹• V3ï¼šè°æ˜éŒ¢/å·¨é¯¨æŒå€‰ç›£æ§ (ä¸»ç¨‹åºåŸ·è¡Œ)
          echo "ğŸ“¡ æ­£åœ¨å•Ÿå‹• V3 è°æ˜éŒ¢åµæ¸¬æ ¸å¿ƒ..."
          python smart_money_radar.py
