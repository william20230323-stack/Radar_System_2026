name: Radar_System_Commander

on:
  schedule:
    - cron: '*/5 * * * *'
  workflow_dispatch:

jobs:
  patrol:
    runs-on: ubuntu-latest
    steps:
      - name: æª¢å‡ºä»£ç¢¼
        uses: actions/checkout@v3

      - name: åˆå§‹åŒ–ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'

      # --- å¼·åŒ–ç‰ˆå•Ÿå‹•å›å ±ï¼šæ¡ç”¨å–®è¡ŒæŒ‡ä»¤ï¼Œé˜²æ­¢ç¶²å€æ–·é–‹ ---
      - name: ç¸½æŒ‡æ®å•Ÿå‹•å›å ±
        env:
          TOKEN: ${{ secrets.TG_TOKEN }}
          CHAT_ID: ${{ secrets.TG_CHAT_ID }}
          SYMBOL: ${{ secrets.TRADE_SYMBOL }}
        run: curl -s -X POST "https://api.telegram.org/bot${TOKEN}/sendMessage" -d "chat_id=${CHAT_ID}" -d "parse_mode=HTML" -d "text=ğŸ›¡ï¸ <b>Radar_Systemç¸½æŒ‡æ®å·²å•Ÿå‹•</b>%0Aç‹€æ…‹ï¼šGitHubå±¤ç´šè¯é€šæ­£å¸¸%0Aç›£æ§æ¨™çš„ï¼š${SYMBOL}"

      - name: å®‰è£çµ„ä»¶
        run: |
          python -m pip install --upgrade pip
          pip install requests pandas pandas_ta

      - name: å•Ÿå‹•é›·é”åŸ·è¡Œå“¡
        env:
          TG_TOKEN: ${{ secrets.TG_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
          TRADE_SYMBOL: ${{ secrets.TRADE_SYMBOL }}
        run: python radar_executor.py
