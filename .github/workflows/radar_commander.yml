name: Radar_System_Commander

on:
  schedule:
    - cron: '*/5 * * * *'
  workflow_dispatch:

jobs:
  patrol:
    runs-on: ubuntu-latest
    steps:
      - name: æª¢å‡ºä»£ç¢¼
        uses: actions/checkout@v3

      - name: åˆå§‹åŒ–ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'

      # --- å•Ÿå‹•é …å›å ±ï¼šç›´æ¥åœ¨ GitHub å±¤ç´šç™¼é€é€šçŸ¥ ---
      - name: ç¸½æŒ‡æ®å•Ÿå‹•å›å ±
        run: |
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TG_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.TG_CHAT_ID }} \
          -d parse_mode="HTML" \
          -d text="ğŸ›¡ï¸ <b>Radar_Systemç¸½æŒ‡æ®å·²å•Ÿå‹•</b>%0Aç‹€æ…‹ï¼šGitHub Actions æµç¨‹é–‹å§‹%0Aæ¨™çš„ï¼š${{ secrets.TRADE_SYMBOL }}"

      - name: å®‰è£çµ„ä»¶
        run: |
          python -m pip install --upgrade pip
          pip install requests pandas pandas_ta

      - name: å•Ÿå‹•é›·é”åŸ·è¡Œå“¡
        env:
          TG_TOKEN: ${{ secrets.TG_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
          TRADE_SYMBOL: ${{ secrets.TRADE_SYMBOL }}
        run: python radar_executor.py
